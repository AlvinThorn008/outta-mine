/*
 * Copyright (c) 2006-2011 Erin Catto http://www.box2d.org
 *
 * This software is provided 'as-is', without any express or implied
 * warranty.  In no event will the authors be held liable for any damages
 * arising from the use of this software.
 * Permission is granted to anyone to use this software for any purpose,
 * including commercial applications, and to alter it and redistribute it
 * freely, subject to the following restrictions:
 * 1. The origin of this software must not be misrepresented; you must not
 * claim that you wrote the original software. If you use this software
 * in a product, an acknowledgment in the product documentation would be
 * appreciated but is not required.
 * 2. Altered source versions must be plainly marked as such, and must not be
 * misrepresented as being the original software.
 * 3. This notice may not be removed or altered from any source distribution.
 */
import { b2_angularSlop, b2_linearSlop, b2_pi, b2Maybe } from '../../common/b2Settings';
import { b2Abs, b2Mat33, b2Rot, b2Vec2, b2Vec3 } from '../../common/b2Math';
import { b2Joint, b2JointDef } from './b2Joint';
/// Weld joint definition. You need to specify local anchor points
/// where they are attached and the relative body angle. The position
/// of the anchor points is important for computing the reaction torque.
export class b2WeldJointDef extends b2JointDef {
    constructor() {
        super(8 /* e_weldJoint */);
        this.localAnchorA = new b2Vec2();
        this.localAnchorB = new b2Vec2();
        this.referenceAngle = 0;
        this.frequencyHz = 0;
        this.dampingRatio = 0;
    }
    Initialize(bA, bB, anchor) {
        this.bodyA = bA;
        this.bodyB = bB;
        this.bodyA.GetLocalPoint(anchor, this.localAnchorA);
        this.bodyB.GetLocalPoint(anchor, this.localAnchorB);
        this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
    }
}
export class b2WeldJoint extends b2Joint {
    constructor(def) {
        super(def);
        this.m_frequencyHz = 0;
        this.m_dampingRatio = 0;
        this.m_bias = 0;
        // Solver shared
        this.m_localAnchorA = new b2Vec2();
        this.m_localAnchorB = new b2Vec2();
        this.m_referenceAngle = 0;
        this.m_gamma = 0;
        this.m_impulse = new b2Vec3(0, 0, 0);
        // Solver temp
        this.m_indexA = 0;
        this.m_indexB = 0;
        this.m_rA = new b2Vec2();
        this.m_rB = new b2Vec2();
        this.m_localCenterA = new b2Vec2();
        this.m_localCenterB = new b2Vec2();
        this.m_invMassA = 0;
        this.m_invMassB = 0;
        this.m_invIA = 0;
        this.m_invIB = 0;
        this.m_mass = new b2Mat33();
        this.m_qA = new b2Rot();
        this.m_qB = new b2Rot();
        this.m_lalcA = new b2Vec2();
        this.m_lalcB = new b2Vec2();
        this.m_K = new b2Mat33();
        this.m_frequencyHz = b2Maybe(def.frequencyHz, 0);
        this.m_dampingRatio = b2Maybe(def.dampingRatio, 0);
        this.m_localAnchorA.Copy(b2Maybe(def.localAnchorA, b2Vec2.ZERO));
        this.m_localAnchorB.Copy(b2Maybe(def.localAnchorB, b2Vec2.ZERO));
        this.m_referenceAngle = b2Maybe(def.referenceAngle, 0);
        this.m_impulse.SetZero();
    }
    InitVelocityConstraints(data) {
        this.m_indexA = this.m_bodyA.m_islandIndex;
        this.m_indexB = this.m_bodyB.m_islandIndex;
        this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter);
        this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter);
        this.m_invMassA = this.m_bodyA.m_invMass;
        this.m_invMassB = this.m_bodyB.m_invMass;
        this.m_invIA = this.m_bodyA.m_invI;
        this.m_invIB = this.m_bodyB.m_invI;
        const aA = data.positions[this.m_indexA].a;
        const vA = data.velocities[this.m_indexA].v;
        let wA = data.velocities[this.m_indexA].w;
        const aB = data.positions[this.m_indexB].a;
        const vB = data.velocities[this.m_indexB].v;
        let wB = data.velocities[this.m_indexB].w;
        const qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);
        // m_rA = b2Mul(qA, m_localAnchorA - m_localCenterA);
        b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);
        // m_rB = b2Mul(qB, m_localAnchorB - m_localCenterB);
        b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);
        // J = [-I -r1_skew I r2_skew]
        //     [ 0       -1 0       1]
        // r_skew = [-ry; rx]
        // Matlab
        // K = [ mA+r1y^2*iA+mB+r2y^2*iB,  -r1y*iA*r1x-r2y*iB*r2x,          -r1y*iA-r2y*iB]
        //     [  -r1y*iA*r1x-r2y*iB*r2x, mA+r1x^2*iA+mB+r2x^2*iB,           r1x*iA+r2x*iB]
        //     [          -r1y*iA-r2y*iB,           r1x*iA+r2x*iB,                   iA+iB]
        const mA = this.m_invMassA, mB = this.m_invMassB;
        const iA = this.m_invIA, iB = this.m_invIB;
        const K = this.m_K;
        K.ex.x = mA + mB + this.m_rA.y * this.m_rA.y * iA + this.m_rB.y * this.m_rB.y * iB;
        K.ey.x = -this.m_rA.y * this.m_rA.x * iA - this.m_rB.y * this.m_rB.x * iB;
        K.ez.x = -this.m_rA.y * iA - this.m_rB.y * iB;
        K.ex.y = K.ey.x;
        K.ey.y = mA + mB + this.m_rA.x * this.m_rA.x * iA + this.m_rB.x * this.m_rB.x * iB;
        K.ez.y = this.m_rA.x * iA + this.m_rB.x * iB;
        K.ex.z = K.ez.x;
        K.ey.z = K.ez.y;
        K.ez.z = iA + iB;
        if (this.m_frequencyHz > 0) {
            K.GetInverse22(this.m_mass);
            let invM = iA + iB;
            const m = invM > 0 ? 1 / invM : 0;
            const C = aB - aA - this.m_referenceAngle;
            // Frequency
            const omega = 2 * b2_pi * this.m_frequencyHz;
            // Damping coefficient
            const d = 2 * m * this.m_dampingRatio * omega;
            // Spring stiffness
            const k = m * omega * omega;
            // magic formulas
            const h = data.step.dt;
            this.m_gamma = h * (d + h * k);
            this.m_gamma = this.m_gamma !== 0 ? 1 / this.m_gamma : 0;
            this.m_bias = C * h * k * this.m_gamma;
            invM += this.m_gamma;
            this.m_mass.ez.z = invM !== 0 ? 1 / invM : 0;
        }
        else {
            K.GetSymInverse33(this.m_mass);
            this.m_gamma = 0;
            this.m_bias = 0;
        }
        if (data.step.warmStarting) {
            // Scale impulses to support a variable time step.
            this.m_impulse.SelfMul(data.step.dtRatio);
            // b2Vec2 P(m_impulse.x, m_impulse.y);
            const P = b2WeldJoint.InitVelocityConstraints_s_P.Set(this.m_impulse.x, this.m_impulse.y);
            // vA -= mA * P;
            vA.SelfMulSub(mA, P);
            wA -= iA * (b2Vec2.CrossVV(this.m_rA, P) + this.m_impulse.z);
            // vB += mB * P;
            vB.SelfMulAdd(mB, P);
            wB += iB * (b2Vec2.CrossVV(this.m_rB, P) + this.m_impulse.z);
        }
        else {
            this.m_impulse.SetZero();
        }
        // data.velocities[this.m_indexA].v = vA;
        data.velocities[this.m_indexA].w = wA;
        // data.velocities[this.m_indexB].v = vB;
        data.velocities[this.m_indexB].w = wB;
    }
    SolveVelocityConstraints(data) {
        const vA = data.velocities[this.m_indexA].v;
        let wA = data.velocities[this.m_indexA].w;
        const vB = data.velocities[this.m_indexB].v;
        let wB = data.velocities[this.m_indexB].w;
        const mA = this.m_invMassA, mB = this.m_invMassB;
        const iA = this.m_invIA, iB = this.m_invIB;
        if (this.m_frequencyHz > 0) {
            const Cdot2 = wB - wA;
            const impulse2 = -this.m_mass.ez.z * (Cdot2 + this.m_bias + this.m_gamma * this.m_impulse.z);
            this.m_impulse.z += impulse2;
            wA -= iA * impulse2;
            wB += iB * impulse2;
            // b2Vec2 Cdot1 = vB + b2Vec2.CrossSV(wB, this.m_rB) - vA - b2Vec2.CrossSV(wA, this.m_rA);
            const Cdot1 = b2Vec2.SubVV(b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2Vec2.s_t0), b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2Vec2.s_t1), b2WeldJoint.SolveVelocityConstraints_s_Cdot1);
            // b2Vec2 impulse1 = -b2Mul22(m_mass, Cdot1);
            const impulse1 = b2Mat33
                .MulM33XY(this.m_mass, Cdot1.x, Cdot1.y, b2WeldJoint.SolveVelocityConstraints_s_impulse1)
                .SelfNeg();
            this.m_impulse.x += impulse1.x;
            this.m_impulse.y += impulse1.y;
            // b2Vec2 P = impulse1;
            const P = impulse1;
            // vA -= mA * P;
            vA.SelfMulSub(mA, P);
            // wA -= iA * b2Cross(m_rA, P);
            wA -= iA * b2Vec2.CrossVV(this.m_rA, P);
            // vB += mB * P;
            vB.SelfMulAdd(mB, P);
            // wB += iB * b2Cross(m_rB, P);
            wB += iB * b2Vec2.CrossVV(this.m_rB, P);
        }
        else {
            // b2Vec2 Cdot1 = vB + b2Cross(wB, this.m_rB) - vA - b2Cross(wA, this.m_rA);
            const Cdot1 = b2Vec2.SubVV(b2Vec2.AddVCrossSV(vB, wB, this.m_rB, b2Vec2.s_t0), b2Vec2.AddVCrossSV(vA, wA, this.m_rA, b2Vec2.s_t1), b2WeldJoint.SolveVelocityConstraints_s_Cdot1);
            const Cdot2 = wB - wA;
            // b2Vec3 const Cdot(Cdot1.x, Cdot1.y, Cdot2);
            // b2Vec3 impulse = -b2Mul(m_mass, Cdot);
            const impulse = b2Mat33
                .MulM33XYZ(this.m_mass, Cdot1.x, Cdot1.y, Cdot2, b2WeldJoint.SolveVelocityConstraints_s_impulse)
                .SelfNeg();
            this.m_impulse.SelfAdd(impulse);
            // b2Vec2 P(impulse.x, impulse.y);
            const P = b2WeldJoint.SolveVelocityConstraints_s_P.Set(impulse.x, impulse.y);
            // vA -= mA * P;
            vA.SelfMulSub(mA, P);
            wA -= iA * (b2Vec2.CrossVV(this.m_rA, P) + impulse.z);
            // vB += mB * P;
            vB.SelfMulAdd(mB, P);
            wB += iB * (b2Vec2.CrossVV(this.m_rB, P) + impulse.z);
        }
        // data.velocities[this.m_indexA].v = vA;
        data.velocities[this.m_indexA].w = wA;
        // data.velocities[this.m_indexB].v = vB;
        data.velocities[this.m_indexB].w = wB;
    }
    SolvePositionConstraints(data) {
        const cA = data.positions[this.m_indexA].c;
        let aA = data.positions[this.m_indexA].a;
        const cB = data.positions[this.m_indexB].c;
        let aB = data.positions[this.m_indexB].a;
        const qA = this.m_qA.SetAngle(aA), qB = this.m_qB.SetAngle(aB);
        const mA = this.m_invMassA, mB = this.m_invMassB;
        const iA = this.m_invIA, iB = this.m_invIB;
        // b2Vec2 rA = b2Mul(qA, m_localAnchorA - m_localCenterA);
        b2Vec2.SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        const rA = b2Rot.MulRV(qA, this.m_lalcA, this.m_rA);
        // b2Vec2 rB = b2Mul(qB, m_localAnchorB - m_localCenterB);
        b2Vec2.SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        const rB = b2Rot.MulRV(qB, this.m_lalcB, this.m_rB);
        let positionError, angularError;
        const K = this.m_K;
        K.ex.x = mA + mB + rA.y * rA.y * iA + rB.y * rB.y * iB;
        K.ey.x = -rA.y * rA.x * iA - rB.y * rB.x * iB;
        K.ez.x = -rA.y * iA - rB.y * iB;
        K.ex.y = K.ey.x;
        K.ey.y = mA + mB + rA.x * rA.x * iA + rB.x * rB.x * iB;
        K.ez.y = rA.x * iA + rB.x * iB;
        K.ex.z = K.ez.x;
        K.ey.z = K.ez.y;
        K.ez.z = iA + iB;
        if (this.m_frequencyHz > 0) {
            // b2Vec2 C1 =  cB + rB - cA - rA;
            const C1 = b2Vec2.SubVV(b2Vec2.AddVV(cB, rB, b2Vec2.s_t0), b2Vec2.AddVV(cA, rA, b2Vec2.s_t1), b2WeldJoint.SolvePositionConstraints_s_C1);
            positionError = C1.Length();
            angularError = 0;
            // b2Vec2 P = -K.Solve22(C1);
            const P = K.Solve22(C1.x, C1.y, b2WeldJoint.SolvePositionConstraints_s_P).SelfNeg();
            // cA -= mA * P;
            cA.SelfMulSub(mA, P);
            aA -= iA * b2Vec2.CrossVV(rA, P);
            // cB += mB * P;
            cB.SelfMulAdd(mB, P);
            aB += iB * b2Vec2.CrossVV(rB, P);
        }
        else {
            // b2Vec2 C1 =  cB + rB - cA - rA;
            const C1 = b2Vec2.SubVV(b2Vec2.AddVV(cB, rB, b2Vec2.s_t0), b2Vec2.AddVV(cA, rA, b2Vec2.s_t1), b2WeldJoint.SolvePositionConstraints_s_C1);
            const C2 = aB - aA - this.m_referenceAngle;
            positionError = C1.Length();
            angularError = b2Abs(C2);
            // b2Vec3 C(C1.x, C1.y, C2);
            // b2Vec3 impulse = -K.Solve33(C);
            const impulse = K.Solve33(C1.x, C1.y, C2, b2WeldJoint.SolvePositionConstraints_s_impulse).SelfNeg();
            // b2Vec2 P(impulse.x, impulse.y);
            const P = b2WeldJoint.SolvePositionConstraints_s_P.Set(impulse.x, impulse.y);
            // cA -= mA * P;
            cA.SelfMulSub(mA, P);
            aA -= iA * (b2Vec2.CrossVV(this.m_rA, P) + impulse.z);
            // cB += mB * P;
            cB.SelfMulAdd(mB, P);
            aB += iB * (b2Vec2.CrossVV(this.m_rB, P) + impulse.z);
        }
        // data.positions[this.m_indexA].c = cA;
        data.positions[this.m_indexA].a = aA;
        // data.positions[this.m_indexB].c = cB;
        data.positions[this.m_indexB].a = aB;
        return positionError <= b2_linearSlop && angularError <= b2_angularSlop;
    }
    GetAnchorA(out) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, out);
    }
    GetAnchorB(out) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, out);
    }
    GetReactionForce(inv_dt, out) {
        // b2Vec2 P(this.m_impulse.x, this.m_impulse.y);
        // return inv_dt * P;
        out.x = inv_dt * this.m_impulse.x;
        out.y = inv_dt * this.m_impulse.y;
        return out;
    }
    GetReactionTorque(inv_dt) {
        return inv_dt * this.m_impulse.z;
    }
    GetLocalAnchorA() {
        return this.m_localAnchorA;
    }
    GetLocalAnchorB() {
        return this.m_localAnchorB;
    }
    GetReferenceAngle() {
        return this.m_referenceAngle;
    }
    SetFrequency(hz) {
        this.m_frequencyHz = hz;
    }
    GetFrequency() {
        return this.m_frequencyHz;
    }
    SetDampingRatio(ratio) {
        this.m_dampingRatio = ratio;
    }
    GetDampingRatio() {
        return this.m_dampingRatio;
    }
}
b2WeldJoint.InitVelocityConstraints_s_P = new b2Vec2();
b2WeldJoint.SolveVelocityConstraints_s_Cdot1 = new b2Vec2();
b2WeldJoint.SolveVelocityConstraints_s_impulse1 = new b2Vec2();
b2WeldJoint.SolveVelocityConstraints_s_impulse = new b2Vec3();
b2WeldJoint.SolveVelocityConstraints_s_P = new b2Vec2();
b2WeldJoint.SolvePositionConstraints_s_C1 = new b2Vec2();
b2WeldJoint.SolvePositionConstraints_s_P = new b2Vec2();
b2WeldJoint.SolvePositionConstraints_s_impulse = new b2Vec3();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYjJXZWxkSm9pbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZHluYW1pY3Mvam9pbnRzL2IyV2VsZEpvaW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBRUgsT0FBTyxFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3hGLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFNLE1BQU0scUJBQXFCLENBQUM7QUFFaEYsT0FBTyxFQUFlLE9BQU8sRUFBRSxVQUFVLEVBQWUsTUFBTSxXQUFXLENBQUM7QUFlMUUsa0VBQWtFO0FBQ2xFLHFFQUFxRTtBQUNyRSx3RUFBd0U7QUFDeEUsTUFBTSxPQUFPLGNBQWUsU0FBUSxVQUFVO0lBVzVDO1FBQ0UsS0FBSyxxQkFBeUIsQ0FBQztRQVh4QixpQkFBWSxHQUFXLElBQUksTUFBTSxFQUFFLENBQUM7UUFFcEMsaUJBQVksR0FBVyxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRTdDLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBRW5CLGdCQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRWhCLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO0lBSWpCLENBQUM7SUFFRCxVQUFVLENBQUMsRUFBVSxFQUFFLEVBQVUsRUFBRSxNQUFjO1FBQy9DLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxJQUFJLENB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QkFBaUIsQ0FBQyxNQUFjO1FBQzlCLE9BQU8sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFRCxpQkFBaUI7UUFDZixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUMvQixDQUFDO0lBRUQsWUFBWSxDQUFDLEVBQVU7UUFDckIsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELFlBQVk7UUFDVixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVELGVBQWUsQ0FBQyxLQUFhO1FBQzNCLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQzlCLENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7O0FBL1ZjLHVDQUEyQixHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFpSDNDLDRDQUFnQyxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDaEQsK0NBQW1DLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUNuRCw4Q0FBa0MsR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ2xELHdDQUE0QixHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUF5RjVDLHlDQUE2QixHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDN0Msd0NBQTRCLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUM1Qyw4Q0FBa0MsR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQ29weXJpZ2h0IChjKSAyMDA2LTIwMTEgRXJpbiBDYXR0byBodHRwOi8vd3d3LmJveDJkLm9yZ1xyXG4gKlxyXG4gKiBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gKiB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAqIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAqIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gKiBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAqIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICogMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICogY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICogaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAqIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAqIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAqIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICogMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICovXHJcblxyXG5pbXBvcnQgeyBiMl9hbmd1bGFyU2xvcCwgYjJfbGluZWFyU2xvcCwgYjJfcGksIGIyTWF5YmUgfSBmcm9tICcuLi8uLi9jb21tb24vYjJTZXR0aW5ncyc7XHJcbmltcG9ydCB7IGIyQWJzLCBiMk1hdDMzLCBiMlJvdCwgYjJWZWMyLCBiMlZlYzMsIFhZIH0gZnJvbSAnLi4vLi4vY29tbW9uL2IyTWF0aCc7XHJcbmltcG9ydCB7IGIyQm9keSB9IGZyb20gJy4uL2IyQm9keSc7XHJcbmltcG9ydCB7IGIySUpvaW50RGVmLCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMkpvaW50VHlwZSB9IGZyb20gJy4vYjJKb2ludCc7XHJcbmltcG9ydCB7IGIyU29sdmVyRGF0YSB9IGZyb20gJy4uL2IyVGltZVN0ZXAnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBiMklXZWxkSm9pbnREZWYgZXh0ZW5kcyBiMklKb2ludERlZiB7XHJcbiAgbG9jYWxBbmNob3JBPzogWFk7XHJcblxyXG4gIGxvY2FsQW5jaG9yQj86IFhZO1xyXG5cclxuICByZWZlcmVuY2VBbmdsZT86IG51bWJlcjtcclxuXHJcbiAgZnJlcXVlbmN5SHo/OiBudW1iZXI7XHJcblxyXG4gIGRhbXBpbmdSYXRpbz86IG51bWJlcjtcclxufVxyXG5cclxuLy8vIFdlbGQgam9pbnQgZGVmaW5pdGlvbi4gWW91IG5lZWQgdG8gc3BlY2lmeSBsb2NhbCBhbmNob3IgcG9pbnRzXHJcbi8vLyB3aGVyZSB0aGV5IGFyZSBhdHRhY2hlZCBhbmQgdGhlIHJlbGF0aXZlIGJvZHkgYW5nbGUuIFRoZSBwb3NpdGlvblxyXG4vLy8gb2YgdGhlIGFuY2hvciBwb2ludHMgaXMgaW1wb3J0YW50IGZvciBjb21wdXRpbmcgdGhlIHJlYWN0aW9uIHRvcnF1ZS5cclxuZXhwb3J0IGNsYXNzIGIyV2VsZEpvaW50RGVmIGV4dGVuZHMgYjJKb2ludERlZiBpbXBsZW1lbnRzIGIySVdlbGRKb2ludERlZiB7XHJcbiAgcmVhZG9ubHkgbG9jYWxBbmNob3JBOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcblxyXG4gIHJlYWRvbmx5IGxvY2FsQW5jaG9yQjogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xyXG5cclxuICByZWZlcmVuY2VBbmdsZSA9IDA7XHJcblxyXG4gIGZyZXF1ZW5jeUh6ID0gMDtcclxuXHJcbiAgZGFtcGluZ1JhdGlvID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihiMkpvaW50VHlwZS5lX3dlbGRKb2ludCk7XHJcbiAgfVxyXG5cclxuICBJbml0aWFsaXplKGJBOiBiMkJvZHksIGJCOiBiMkJvZHksIGFuY2hvcjogYjJWZWMyKTogdm9pZCB7XHJcbiAgICB0aGlzLmJvZHlBID0gYkE7XHJcbiAgICB0aGlzLmJvZHlCID0gYkI7XHJcbiAgICB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQSk7XHJcbiAgICB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yLCB0aGlzLmxvY2FsQW5jaG9yQik7XHJcbiAgICB0aGlzLnJlZmVyZW5jZUFuZ2xlID0gdGhpcy5ib2R5Qi5HZXRBbmdsZSgpIC0gdGhpcy5ib2R5QS5HZXRBbmdsZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIGIyV2VsZEpvaW50IGV4dGVuZHMgYjJKb2ludCB7XHJcbiAgbV9mcmVxdWVuY3lIeiA9IDA7XHJcbiAgbV9kYW1waW5nUmF0aW8gPSAwO1xyXG4gIG1fYmlhcyA9IDA7XHJcblxyXG4gIC8vIFNvbHZlciBzaGFyZWRcclxuICByZWFkb25seSBtX2xvY2FsQW5jaG9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xyXG4gIHJlYWRvbmx5IG1fbG9jYWxBbmNob3JCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgbV9yZWZlcmVuY2VBbmdsZSA9IDA7XHJcbiAgbV9nYW1tYSA9IDA7XHJcbiAgcmVhZG9ubHkgbV9pbXB1bHNlOiBiMlZlYzMgPSBuZXcgYjJWZWMzKDAsIDAsIDApO1xyXG5cclxuICAvLyBTb2x2ZXIgdGVtcFxyXG4gIG1faW5kZXhBID0gMDtcclxuICBtX2luZGV4QiA9IDA7XHJcbiAgcmVhZG9ubHkgbV9yQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xyXG4gIHJlYWRvbmx5IG1fckI6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcclxuICByZWFkb25seSBtX2xvY2FsQ2VudGVyQTogYjJWZWMyID0gbmV3IGIyVmVjMigpO1xyXG4gIHJlYWRvbmx5IG1fbG9jYWxDZW50ZXJCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgbV9pbnZNYXNzQSA9IDA7XHJcbiAgbV9pbnZNYXNzQiA9IDA7XHJcbiAgbV9pbnZJQSA9IDA7XHJcbiAgbV9pbnZJQiA9IDA7XHJcbiAgcmVhZG9ubHkgbV9tYXNzOiBiMk1hdDMzID0gbmV3IGIyTWF0MzMoKTtcclxuXHJcbiAgcmVhZG9ubHkgbV9xQTogYjJSb3QgPSBuZXcgYjJSb3QoKTtcclxuICByZWFkb25seSBtX3FCOiBiMlJvdCA9IG5ldyBiMlJvdCgpO1xyXG4gIHJlYWRvbmx5IG1fbGFsY0E6IGIyVmVjMiA9IG5ldyBiMlZlYzIoKTtcclxuICByZWFkb25seSBtX2xhbGNCOiBiMlZlYzIgPSBuZXcgYjJWZWMyKCk7XHJcbiAgcmVhZG9ubHkgbV9LOiBiMk1hdDMzID0gbmV3IGIyTWF0MzMoKTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGVmOiBiMklXZWxkSm9pbnREZWYpIHtcclxuICAgIHN1cGVyKGRlZik7XHJcblxyXG4gICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gYjJNYXliZShkZWYuZnJlcXVlbmN5SHosIDApO1xyXG4gICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGIyTWF5YmUoZGVmLmRhbXBpbmdSYXRpbywgMCk7XHJcblxyXG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5Db3B5KGIyTWF5YmUoZGVmLmxvY2FsQW5jaG9yQSwgYjJWZWMyLlpFUk8pKTtcclxuICAgIHRoaXMubV9sb2NhbEFuY2hvckIuQ29weShiMk1heWJlKGRlZi5sb2NhbEFuY2hvckIsIGIyVmVjMi5aRVJPKSk7XHJcbiAgICB0aGlzLm1fcmVmZXJlbmNlQW5nbGUgPSBiMk1heWJlKGRlZi5yZWZlcmVuY2VBbmdsZSwgMCk7XHJcbiAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBJbml0VmVsb2NpdHlDb25zdHJhaW50c19zX1AgPSBuZXcgYjJWZWMyKCk7XHJcblxyXG4gIEluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xyXG4gICAgdGhpcy5tX2luZGV4QSA9IHRoaXMubV9ib2R5QS5tX2lzbGFuZEluZGV4O1xyXG4gICAgdGhpcy5tX2luZGV4QiA9IHRoaXMubV9ib2R5Qi5tX2lzbGFuZEluZGV4O1xyXG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQS5Db3B5KHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcclxuICAgIHRoaXMubV9sb2NhbENlbnRlckIuQ29weSh0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcik7XHJcbiAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xyXG4gICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcclxuICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XHJcbiAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xyXG5cclxuICAgIGNvbnN0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xyXG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xyXG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcclxuXHJcbiAgICBjb25zdCBhQjogbnVtYmVyID0gZGF0YS5wb3NpdGlvbnNbdGhpcy5tX2luZGV4Ql0uYTtcclxuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcclxuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XHJcblxyXG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSxcclxuICAgICAgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcclxuXHJcbiAgICAvLyBtX3JBID0gYjJNdWwocUEsIG1fbG9jYWxBbmNob3JBIC0gbV9sb2NhbENlbnRlckEpO1xyXG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEsIHRoaXMubV9sYWxjQSk7XHJcbiAgICBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xyXG4gICAgLy8gbV9yQiA9IGIyTXVsKHFCLCBtX2xvY2FsQW5jaG9yQiAtIG1fbG9jYWxDZW50ZXJCKTtcclxuICAgIGIyVmVjMi5TdWJWVih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCLCB0aGlzLm1fbGFsY0IpO1xyXG4gICAgYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcclxuXHJcbiAgICAvLyBKID0gWy1JIC1yMV9za2V3IEkgcjJfc2tld11cclxuICAgIC8vICAgICBbIDAgICAgICAgLTEgMCAgICAgICAxXVxyXG4gICAgLy8gcl9za2V3ID0gWy1yeTsgcnhdXHJcblxyXG4gICAgLy8gTWF0bGFiXHJcbiAgICAvLyBLID0gWyBtQStyMXleMippQSttQityMnleMippQiwgIC1yMXkqaUEqcjF4LXIyeSppQipyMngsICAgICAgICAgIC1yMXkqaUEtcjJ5KmlCXVxyXG4gICAgLy8gICAgIFsgIC1yMXkqaUEqcjF4LXIyeSppQipyMngsIG1BK3IxeF4yKmlBK21CK3IyeF4yKmlCLCAgICAgICAgICAgcjF4KmlBK3IyeCppQl1cclxuICAgIC8vICAgICBbICAgICAgICAgIC1yMXkqaUEtcjJ5KmlCLCAgICAgICAgICAgcjF4KmlBK3IyeCppQiwgICAgICAgICAgICAgICAgICAgaUEraUJdXHJcblxyXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSxcclxuICAgICAgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcclxuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsXHJcbiAgICAgIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XHJcblxyXG4gICAgY29uc3QgSzogYjJNYXQzMyA9IHRoaXMubV9LO1xyXG4gICAgSy5leC54ID0gbUEgKyBtQiArIHRoaXMubV9yQS55ICogdGhpcy5tX3JBLnkgKiBpQSArIHRoaXMubV9yQi55ICogdGhpcy5tX3JCLnkgKiBpQjtcclxuICAgIEsuZXkueCA9IC10aGlzLm1fckEueSAqIHRoaXMubV9yQS54ICogaUEgLSB0aGlzLm1fckIueSAqIHRoaXMubV9yQi54ICogaUI7XHJcbiAgICBLLmV6LnggPSAtdGhpcy5tX3JBLnkgKiBpQSAtIHRoaXMubV9yQi55ICogaUI7XHJcbiAgICBLLmV4LnkgPSBLLmV5Lng7XHJcbiAgICBLLmV5LnkgPSBtQSArIG1CICsgdGhpcy5tX3JBLnggKiB0aGlzLm1fckEueCAqIGlBICsgdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueCAqIGlCO1xyXG4gICAgSy5lei55ID0gdGhpcy5tX3JBLnggKiBpQSArIHRoaXMubV9yQi54ICogaUI7XHJcbiAgICBLLmV4LnogPSBLLmV6Lng7XHJcbiAgICBLLmV5LnogPSBLLmV6Lnk7XHJcbiAgICBLLmV6LnogPSBpQSArIGlCO1xyXG5cclxuICAgIGlmICh0aGlzLm1fZnJlcXVlbmN5SHogPiAwKSB7XHJcbiAgICAgIEsuR2V0SW52ZXJzZTIyKHRoaXMubV9tYXNzKTtcclxuXHJcbiAgICAgIGxldCBpbnZNOiBudW1iZXIgPSBpQSArIGlCO1xyXG4gICAgICBjb25zdCBtOiBudW1iZXIgPSBpbnZNID4gMCA/IDEgLyBpbnZNIDogMDtcclxuXHJcbiAgICAgIGNvbnN0IEM6IG51bWJlciA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XHJcblxyXG4gICAgICAvLyBGcmVxdWVuY3lcclxuICAgICAgY29uc3Qgb21lZ2E6IG51bWJlciA9IDIgKiBiMl9waSAqIHRoaXMubV9mcmVxdWVuY3lIejtcclxuXHJcbiAgICAgIC8vIERhbXBpbmcgY29lZmZpY2llbnRcclxuICAgICAgY29uc3QgZDogbnVtYmVyID0gMiAqIG0gKiB0aGlzLm1fZGFtcGluZ1JhdGlvICogb21lZ2E7XHJcblxyXG4gICAgICAvLyBTcHJpbmcgc3RpZmZuZXNzXHJcbiAgICAgIGNvbnN0IGs6IG51bWJlciA9IG0gKiBvbWVnYSAqIG9tZWdhO1xyXG5cclxuICAgICAgLy8gbWFnaWMgZm9ybXVsYXNcclxuICAgICAgY29uc3QgaDogbnVtYmVyID0gZGF0YS5zdGVwLmR0O1xyXG4gICAgICB0aGlzLm1fZ2FtbWEgPSBoICogKGQgKyBoICogayk7XHJcbiAgICAgIHRoaXMubV9nYW1tYSA9IHRoaXMubV9nYW1tYSAhPT0gMCA/IDEgLyB0aGlzLm1fZ2FtbWEgOiAwO1xyXG4gICAgICB0aGlzLm1fYmlhcyA9IEMgKiBoICogayAqIHRoaXMubV9nYW1tYTtcclxuXHJcbiAgICAgIGludk0gKz0gdGhpcy5tX2dhbW1hO1xyXG4gICAgICB0aGlzLm1fbWFzcy5lei56ID0gaW52TSAhPT0gMCA/IDEgLyBpbnZNIDogMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIEsuR2V0U3ltSW52ZXJzZTMzKHRoaXMubV9tYXNzKTtcclxuICAgICAgdGhpcy5tX2dhbW1hID0gMDtcclxuICAgICAgdGhpcy5tX2JpYXMgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLnN0ZXAud2FybVN0YXJ0aW5nKSB7XHJcbiAgICAgIC8vIFNjYWxlIGltcHVsc2VzIHRvIHN1cHBvcnQgYSB2YXJpYWJsZSB0aW1lIHN0ZXAuXHJcbiAgICAgIHRoaXMubV9pbXB1bHNlLlNlbGZNdWwoZGF0YS5zdGVwLmR0UmF0aW8pO1xyXG5cclxuICAgICAgLy8gYjJWZWMyIFAobV9pbXB1bHNlLngsIG1faW1wdWxzZS55KTtcclxuICAgICAgY29uc3QgUDogYjJWZWMyID0gYjJXZWxkSm9pbnQuSW5pdFZlbG9jaXR5Q29uc3RyYWludHNfc19QLlNldChcclxuICAgICAgICB0aGlzLm1faW1wdWxzZS54LFxyXG4gICAgICAgIHRoaXMubV9pbXB1bHNlLnksXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyB2QSAtPSBtQSAqIFA7XHJcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xyXG4gICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckEsIFApICsgdGhpcy5tX2ltcHVsc2Uueik7XHJcblxyXG4gICAgICAvLyB2QiArPSBtQiAqIFA7XHJcbiAgICAgIHZCLlNlbGZNdWxBZGQobUIsIFApO1xyXG4gICAgICB3QiArPSBpQiAqIChiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApICsgdGhpcy5tX2ltcHVsc2Uueik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEFdLnYgPSB2QTtcclxuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS53ID0gd0E7XHJcbiAgICAvLyBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udiA9IHZCO1xyXG4gICAgZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLncgPSB3QjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3QxID0gbmV3IGIyVmVjMigpO1xyXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2UxID0gbmV3IGIyVmVjMigpO1xyXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfUCA9IG5ldyBiMlZlYzIoKTtcclxuXHJcbiAgU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKGRhdGE6IGIyU29sdmVyRGF0YSk6IHZvaWQge1xyXG4gICAgY29uc3QgdkE6IGIyVmVjMiA9IGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52O1xyXG4gICAgbGV0IHdBOiBudW1iZXIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udztcclxuICAgIGNvbnN0IHZCOiBiMlZlYzIgPSBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4Ql0udjtcclxuICAgIGxldCB3QjogbnVtYmVyID0gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnc7XHJcblxyXG4gICAgY29uc3QgbUE6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQSxcclxuICAgICAgbUI6IG51bWJlciA9IHRoaXMubV9pbnZNYXNzQjtcclxuICAgIGNvbnN0IGlBOiBudW1iZXIgPSB0aGlzLm1faW52SUEsXHJcbiAgICAgIGlCOiBudW1iZXIgPSB0aGlzLm1faW52SUI7XHJcblxyXG4gICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDApIHtcclxuICAgICAgY29uc3QgQ2RvdDI6IG51bWJlciA9IHdCIC0gd0E7XHJcblxyXG4gICAgICBjb25zdCBpbXB1bHNlMjogbnVtYmVyID1cclxuICAgICAgICAtdGhpcy5tX21hc3MuZXoueiAqIChDZG90MiArIHRoaXMubV9iaWFzICsgdGhpcy5tX2dhbW1hICogdGhpcy5tX2ltcHVsc2Uueik7XHJcbiAgICAgIHRoaXMubV9pbXB1bHNlLnogKz0gaW1wdWxzZTI7XHJcblxyXG4gICAgICB3QSAtPSBpQSAqIGltcHVsc2UyO1xyXG4gICAgICB3QiArPSBpQiAqIGltcHVsc2UyO1xyXG5cclxuICAgICAgLy8gYjJWZWMyIENkb3QxID0gdkIgKyBiMlZlYzIuQ3Jvc3NTVih3QiwgdGhpcy5tX3JCKSAtIHZBIC0gYjJWZWMyLkNyb3NzU1Yod0EsIHRoaXMubV9yQSk7XHJcbiAgICAgIGNvbnN0IENkb3QxOiBiMlZlYzIgPSBiMlZlYzIuU3ViVlYoXHJcbiAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZCLCB3QiwgdGhpcy5tX3JCLCBiMlZlYzIuc190MCksXHJcbiAgICAgICAgYjJWZWMyLkFkZFZDcm9zc1NWKHZBLCB3QSwgdGhpcy5tX3JBLCBiMlZlYzIuc190MSksXHJcbiAgICAgICAgYjJXZWxkSm9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzX3NfQ2RvdDEsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBiMlZlYzIgaW1wdWxzZTEgPSAtYjJNdWwyMihtX21hc3MsIENkb3QxKTtcclxuICAgICAgY29uc3QgaW1wdWxzZTE6IGIyVmVjMiA9IGIyTWF0MzNcclxuICAgICAgICAuTXVsTTMzWFkodGhpcy5tX21hc3MsIENkb3QxLngsIENkb3QxLnksIGIyV2VsZEpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX2ltcHVsc2UxKVxyXG4gICAgICAgIC5TZWxmTmVnKCk7XHJcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gaW1wdWxzZTEueDtcclxuICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSBpbXB1bHNlMS55O1xyXG5cclxuICAgICAgLy8gYjJWZWMyIFAgPSBpbXB1bHNlMTtcclxuICAgICAgY29uc3QgUDogYjJWZWMyID0gaW1wdWxzZTE7XHJcblxyXG4gICAgICAvLyB2QSAtPSBtQSAqIFA7XHJcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xyXG4gICAgICAvLyB3QSAtPSBpQSAqIGIyQ3Jvc3MobV9yQSwgUCk7XHJcbiAgICAgIHdBIC09IGlBICogYjJWZWMyLkNyb3NzVlYodGhpcy5tX3JBLCBQKTtcclxuXHJcbiAgICAgIC8vIHZCICs9IG1CICogUDtcclxuICAgICAgdkIuU2VsZk11bEFkZChtQiwgUCk7XHJcbiAgICAgIC8vIHdCICs9IGlCICogYjJDcm9zcyhtX3JCLCBQKTtcclxuICAgICAgd0IgKz0gaUIgKiBiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckIsIFApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gYjJWZWMyIENkb3QxID0gdkIgKyBiMkNyb3NzKHdCLCB0aGlzLm1fckIpIC0gdkEgLSBiMkNyb3NzKHdBLCB0aGlzLm1fckEpO1xyXG4gICAgICBjb25zdCBDZG90MTogYjJWZWMyID0gYjJWZWMyLlN1YlZWKFxyXG4gICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2Qiwgd0IsIHRoaXMubV9yQiwgYjJWZWMyLnNfdDApLFxyXG4gICAgICAgIGIyVmVjMi5BZGRWQ3Jvc3NTVih2QSwgd0EsIHRoaXMubV9yQSwgYjJWZWMyLnNfdDEpLFxyXG4gICAgICAgIGIyV2VsZEpvaW50LlNvbHZlVmVsb2NpdHlDb25zdHJhaW50c19zX0Nkb3QxLFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBDZG90MjogbnVtYmVyID0gd0IgLSB3QTtcclxuICAgICAgLy8gYjJWZWMzIGNvbnN0IENkb3QoQ2RvdDEueCwgQ2RvdDEueSwgQ2RvdDIpO1xyXG5cclxuICAgICAgLy8gYjJWZWMzIGltcHVsc2UgPSAtYjJNdWwobV9tYXNzLCBDZG90KTtcclxuICAgICAgY29uc3QgaW1wdWxzZTogYjJWZWMzID0gYjJNYXQzM1xyXG4gICAgICAgIC5NdWxNMzNYWVooXHJcbiAgICAgICAgICB0aGlzLm1fbWFzcyxcclxuICAgICAgICAgIENkb3QxLngsXHJcbiAgICAgICAgICBDZG90MS55LFxyXG4gICAgICAgICAgQ2RvdDIsXHJcbiAgICAgICAgICBiMldlbGRKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19pbXB1bHNlLFxyXG4gICAgICAgIClcclxuICAgICAgICAuU2VsZk5lZygpO1xyXG4gICAgICB0aGlzLm1faW1wdWxzZS5TZWxmQWRkKGltcHVsc2UpO1xyXG5cclxuICAgICAgLy8gYjJWZWMyIFAoaW1wdWxzZS54LCBpbXB1bHNlLnkpO1xyXG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMldlbGRKb2ludC5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHNfc19QLlNldChpbXB1bHNlLngsIGltcHVsc2UueSk7XHJcblxyXG4gICAgICAvLyB2QSAtPSBtQSAqIFA7XHJcbiAgICAgIHZBLlNlbGZNdWxTdWIobUEsIFApO1xyXG4gICAgICB3QSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckEsIFApICsgaW1wdWxzZS56KTtcclxuXHJcbiAgICAgIC8vIHZCICs9IG1CICogUDtcclxuICAgICAgdkIuU2VsZk11bEFkZChtQiwgUCk7XHJcbiAgICAgIHdCICs9IGlCICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgUCkgKyBpbXB1bHNlLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhBXS52ID0gdkE7XHJcbiAgICBkYXRhLnZlbG9jaXRpZXNbdGhpcy5tX2luZGV4QV0udyA9IHdBO1xyXG4gICAgLy8gZGF0YS52ZWxvY2l0aWVzW3RoaXMubV9pbmRleEJdLnYgPSB2QjtcclxuICAgIGRhdGEudmVsb2NpdGllc1t0aGlzLm1faW5kZXhCXS53ID0gd0I7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19DMSA9IG5ldyBiMlZlYzIoKTtcclxuICBwcml2YXRlIHN0YXRpYyBTb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QID0gbmV3IGIyVmVjMigpO1xyXG4gIHByaXZhdGUgc3RhdGljIFNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XHJcblxyXG4gIFNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhkYXRhOiBiMlNvbHZlckRhdGEpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGNBOiBiMlZlYzIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5jO1xyXG4gICAgbGV0IGFBOiBudW1iZXIgPSBkYXRhLnBvc2l0aW9uc1t0aGlzLm1faW5kZXhBXS5hO1xyXG4gICAgY29uc3QgY0I6IGIyVmVjMiA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmM7XHJcbiAgICBsZXQgYUI6IG51bWJlciA9IGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmE7XHJcblxyXG4gICAgY29uc3QgcUE6IGIyUm90ID0gdGhpcy5tX3FBLlNldEFuZ2xlKGFBKSxcclxuICAgICAgcUI6IGIyUm90ID0gdGhpcy5tX3FCLlNldEFuZ2xlKGFCKTtcclxuXHJcbiAgICBjb25zdCBtQTogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NBLFxyXG4gICAgICBtQjogbnVtYmVyID0gdGhpcy5tX2ludk1hc3NCO1xyXG4gICAgY29uc3QgaUE6IG51bWJlciA9IHRoaXMubV9pbnZJQSxcclxuICAgICAgaUI6IG51bWJlciA9IHRoaXMubV9pbnZJQjtcclxuXHJcbiAgICAvLyBiMlZlYzIgckEgPSBiMk11bChxQSwgbV9sb2NhbEFuY2hvckEgLSBtX2xvY2FsQ2VudGVyQSk7XHJcbiAgICBiMlZlYzIuU3ViVlYodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSwgdGhpcy5tX2xhbGNBKTtcclxuICAgIGNvbnN0IHJBOiBiMlZlYzIgPSBiMlJvdC5NdWxSVihxQSwgdGhpcy5tX2xhbGNBLCB0aGlzLm1fckEpO1xyXG4gICAgLy8gYjJWZWMyIHJCID0gYjJNdWwocUIsIG1fbG9jYWxBbmNob3JCIC0gbV9sb2NhbENlbnRlckIpO1xyXG4gICAgYjJWZWMyLlN1YlZWKHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIsIHRoaXMubV9sYWxjQik7XHJcbiAgICBjb25zdCByQjogYjJWZWMyID0gYjJSb3QuTXVsUlYocUIsIHRoaXMubV9sYWxjQiwgdGhpcy5tX3JCKTtcclxuXHJcbiAgICBsZXQgcG9zaXRpb25FcnJvcjogbnVtYmVyLCBhbmd1bGFyRXJyb3I6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdCBLOiBiMk1hdDMzID0gdGhpcy5tX0s7XHJcbiAgICBLLmV4LnggPSBtQSArIG1CICsgckEueSAqIHJBLnkgKiBpQSArIHJCLnkgKiByQi55ICogaUI7XHJcbiAgICBLLmV5LnggPSAtckEueSAqIHJBLnggKiBpQSAtIHJCLnkgKiByQi54ICogaUI7XHJcbiAgICBLLmV6LnggPSAtckEueSAqIGlBIC0gckIueSAqIGlCO1xyXG4gICAgSy5leC55ID0gSy5leS54O1xyXG4gICAgSy5leS55ID0gbUEgKyBtQiArIHJBLnggKiByQS54ICogaUEgKyByQi54ICogckIueCAqIGlCO1xyXG4gICAgSy5lei55ID0gckEueCAqIGlBICsgckIueCAqIGlCO1xyXG4gICAgSy5leC56ID0gSy5lei54O1xyXG4gICAgSy5leS56ID0gSy5lei55O1xyXG4gICAgSy5lei56ID0gaUEgKyBpQjtcclxuXHJcbiAgICBpZiAodGhpcy5tX2ZyZXF1ZW5jeUh6ID4gMCkge1xyXG4gICAgICAvLyBiMlZlYzIgQzEgPSAgY0IgKyByQiAtIGNBIC0gckE7XHJcbiAgICAgIGNvbnN0IEMxID0gYjJWZWMyLlN1YlZWKFxyXG4gICAgICAgIGIyVmVjMi5BZGRWVihjQiwgckIsIGIyVmVjMi5zX3QwKSxcclxuICAgICAgICBiMlZlYzIuQWRkVlYoY0EsIHJBLCBiMlZlYzIuc190MSksXHJcbiAgICAgICAgYjJXZWxkSm9pbnQuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzX3NfQzEsXHJcbiAgICAgICk7XHJcbiAgICAgIHBvc2l0aW9uRXJyb3IgPSBDMS5MZW5ndGgoKTtcclxuICAgICAgYW5ndWxhckVycm9yID0gMDtcclxuXHJcbiAgICAgIC8vIGIyVmVjMiBQID0gLUsuU29sdmUyMihDMSk7XHJcbiAgICAgIGNvbnN0IFA6IGIyVmVjMiA9IEsuU29sdmUyMihDMS54LCBDMS55LCBiMldlbGRKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QKS5TZWxmTmVnKCk7XHJcblxyXG4gICAgICAvLyBjQSAtPSBtQSAqIFA7XHJcbiAgICAgIGNBLlNlbGZNdWxTdWIobUEsIFApO1xyXG4gICAgICBhQSAtPSBpQSAqIGIyVmVjMi5Dcm9zc1ZWKHJBLCBQKTtcclxuXHJcbiAgICAgIC8vIGNCICs9IG1CICogUDtcclxuICAgICAgY0IuU2VsZk11bEFkZChtQiwgUCk7XHJcbiAgICAgIGFCICs9IGlCICogYjJWZWMyLkNyb3NzVlYockIsIFApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gYjJWZWMyIEMxID0gIGNCICsgckIgLSBjQSAtIHJBO1xyXG4gICAgICBjb25zdCBDMSA9IGIyVmVjMi5TdWJWVihcclxuICAgICAgICBiMlZlYzIuQWRkVlYoY0IsIHJCLCBiMlZlYzIuc190MCksXHJcbiAgICAgICAgYjJWZWMyLkFkZFZWKGNBLCByQSwgYjJWZWMyLnNfdDEpLFxyXG4gICAgICAgIGIyV2VsZEpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX0MxLFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBDMjogbnVtYmVyID0gYUIgLSBhQSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcclxuXHJcbiAgICAgIHBvc2l0aW9uRXJyb3IgPSBDMS5MZW5ndGgoKTtcclxuICAgICAgYW5ndWxhckVycm9yID0gYjJBYnMoQzIpO1xyXG5cclxuICAgICAgLy8gYjJWZWMzIEMoQzEueCwgQzEueSwgQzIpO1xyXG5cclxuICAgICAgLy8gYjJWZWMzIGltcHVsc2UgPSAtSy5Tb2x2ZTMzKEMpO1xyXG4gICAgICBjb25zdCBpbXB1bHNlOiBiMlZlYzMgPSBLLlNvbHZlMzMoXHJcbiAgICAgICAgQzEueCxcclxuICAgICAgICBDMS55LFxyXG4gICAgICAgIEMyLFxyXG4gICAgICAgIGIyV2VsZEpvaW50LlNvbHZlUG9zaXRpb25Db25zdHJhaW50c19zX2ltcHVsc2UsXHJcbiAgICAgICkuU2VsZk5lZygpO1xyXG5cclxuICAgICAgLy8gYjJWZWMyIFAoaW1wdWxzZS54LCBpbXB1bHNlLnkpO1xyXG4gICAgICBjb25zdCBQOiBiMlZlYzIgPSBiMldlbGRKb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHNfc19QLlNldChpbXB1bHNlLngsIGltcHVsc2UueSk7XHJcblxyXG4gICAgICAvLyBjQSAtPSBtQSAqIFA7XHJcbiAgICAgIGNBLlNlbGZNdWxTdWIobUEsIFApO1xyXG4gICAgICBhQSAtPSBpQSAqIChiMlZlYzIuQ3Jvc3NWVih0aGlzLm1fckEsIFApICsgaW1wdWxzZS56KTtcclxuXHJcbiAgICAgIC8vIGNCICs9IG1CICogUDtcclxuICAgICAgY0IuU2VsZk11bEFkZChtQiwgUCk7XHJcbiAgICAgIGFCICs9IGlCICogKGIyVmVjMi5Dcm9zc1ZWKHRoaXMubV9yQiwgUCkgKyBpbXB1bHNlLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmMgPSBjQTtcclxuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEFdLmEgPSBhQTtcclxuICAgIC8vIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmMgPSBjQjtcclxuICAgIGRhdGEucG9zaXRpb25zW3RoaXMubV9pbmRleEJdLmEgPSBhQjtcclxuXHJcbiAgICByZXR1cm4gcG9zaXRpb25FcnJvciA8PSBiMl9saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBiMl9hbmd1bGFyU2xvcDtcclxuICB9XHJcblxyXG4gIEdldEFuY2hvckE8VCBleHRlbmRzIFhZPihvdXQ6IFQpOiBUIHtcclxuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBLCBvdXQpO1xyXG4gIH1cclxuXHJcbiAgR2V0QW5jaG9yQjxUIGV4dGVuZHMgWFk+KG91dDogVCk6IFQge1xyXG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIsIG91dCk7XHJcbiAgfVxyXG5cclxuICBHZXRSZWFjdGlvbkZvcmNlPFQgZXh0ZW5kcyBYWT4oaW52X2R0OiBudW1iZXIsIG91dDogVCk6IFQge1xyXG4gICAgLy8gYjJWZWMyIFAodGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSk7XHJcbiAgICAvLyByZXR1cm4gaW52X2R0ICogUDtcclxuICAgIG91dC54ID0gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueDtcclxuICAgIG91dC55ID0gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueTtcclxuICAgIHJldHVybiBvdXQ7XHJcbiAgfVxyXG5cclxuICBHZXRSZWFjdGlvblRvcnF1ZShpbnZfZHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UuejtcclxuICB9XHJcblxyXG4gIEdldExvY2FsQW5jaG9yQSgpOiBSZWFkb25seTxiMlZlYzI+IHtcclxuICAgIHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JBO1xyXG4gIH1cclxuXHJcbiAgR2V0TG9jYWxBbmNob3JCKCk6IFJlYWRvbmx5PGIyVmVjMj4ge1xyXG4gICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7XHJcbiAgfVxyXG5cclxuICBHZXRSZWZlcmVuY2VBbmdsZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcclxuICB9XHJcblxyXG4gIFNldEZyZXF1ZW5jeShoejogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLm1fZnJlcXVlbmN5SHogPSBoejtcclxuICB9XHJcblxyXG4gIEdldEZyZXF1ZW5jeSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubV9mcmVxdWVuY3lIejtcclxuICB9XHJcblxyXG4gIFNldERhbXBpbmdSYXRpbyhyYXRpbzogbnVtYmVyKSB7XHJcbiAgICB0aGlzLm1fZGFtcGluZ1JhdGlvID0gcmF0aW87XHJcbiAgfVxyXG5cclxuICBHZXREYW1waW5nUmF0aW8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmdSYXRpbztcclxuICB9XHJcbn1cclxuIl19