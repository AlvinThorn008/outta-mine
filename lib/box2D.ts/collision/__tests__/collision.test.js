import { b2_epsilon, b2Abs, b2MassData, b2PolygonShape, b2Vec2 } from '../..';
describe('collision test', () => {
    it('polygon mass data', () => {
        const center = new b2Vec2(100.0, -50.0);
        const hx = 0.5;
        const hy = 1.5;
        const angle1 = 0.25;
        // Data from issue #422. Not used because the data exceeds accuracy limits.
        //const b2Vec2 center(-15000.0f, -15000.0f);
        //const float hx = 0.72f, hy = 0.72f;
        //const float angle1 = 0.0f;
        const polygon1 = new b2PolygonShape();
        polygon1.SetAsBox(hx, hy, center, angle1);
        const absTol = 2.0 * b2_epsilon;
        const relTol = 2.0 * b2_epsilon;
        expect(b2Abs(polygon1.m_centroid.x - center.x) < absTol + relTol * b2Abs(center.x)).toStrictEqual(true);
        expect(b2Abs(polygon1.m_centroid.y - center.y) < absTol + relTol * b2Abs(center.y)).toStrictEqual(true);
        const vertices = [
            new b2Vec2(center.x - hx, center.y - hy),
            new b2Vec2(center.x + hx, center.y - hy),
            new b2Vec2(center.x - hx, center.y + hy),
            new b2Vec2(center.x + hx, center.y + hy),
        ];
        const polygon2 = new b2PolygonShape();
        polygon2.Set(vertices, 4);
        expect(b2Abs(polygon2.m_centroid.x - center.x) < absTol + relTol * b2Abs(center.x)).toStrictEqual(true);
        expect(b2Abs(polygon2.m_centroid.y - center.y) < absTol + relTol * b2Abs(center.y)).toStrictEqual(true);
        const mass = 4.0 * hx * hy;
        const inertia = (mass / 3.0) * (hx * hx + hy * hy) + mass * center.Dot(center);
        const massData1 = new b2MassData();
        polygon1.ComputeMass(massData1, 1.0);
        expect(b2Abs(massData1.center.x - center.x) < absTol + relTol * b2Abs(center.x)).toStrictEqual(true);
        expect(b2Abs(massData1.center.y - center.y) < absTol + relTol * b2Abs(center.y)).toStrictEqual(true);
        expect(b2Abs(massData1.mass - mass) < 20.0 * (absTol + relTol * mass)).toStrictEqual(true);
        expect(b2Abs(massData1.I - inertia) < 40.0 * (absTol + relTol * inertia)).toStrictEqual(true);
        const massData2 = new b2MassData();
        polygon2.ComputeMass(massData2, 1.0);
        expect(b2Abs(massData2.center.x - center.x) < absTol + relTol * b2Abs(center.x)).toStrictEqual(true);
        expect(b2Abs(massData2.center.y - center.y) < absTol + relTol * b2Abs(center.y)).toStrictEqual(true);
        expect(b2Abs(massData2.mass - mass) < 20.0 * (absTol + relTol * mass)).toStrictEqual(true);
        expect(b2Abs(massData2.I - inertia) < 40.0 * (absTol + relTol * inertia)).toStrictEqual(true);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGlzaW9uLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29sbGlzaW9uL19fdGVzdHNfXy9jb2xsaXNpb24udGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUU5RSxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzlCLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDM0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDO1FBQ2YsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDO1FBQ2YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBRXBCLDJFQUEyRTtRQUMzRSw0Q0FBNEM7UUFDNUMscUNBQXFDO1FBQ3JDLDRCQUE0QjtRQUU1QixNQUFNLFFBQVEsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO1FBQ3RDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFMUMsTUFBTSxNQUFNLEdBQUcsR0FBRyxHQUFHLFVBQVUsQ0FBQztRQUNoQyxNQUFNLE1BQU0sR0FBRyxHQUFHLEdBQUcsVUFBVSxDQUFDO1FBRWhDLE1BQU0sQ0FDSixLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FDNUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUNKLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUM1RSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV0QixNQUFNLFFBQVEsR0FBYTtZQUN6QixJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN4QyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN4QyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN4QyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztTQUN6QyxDQUFDO1FBRUYsTUFBTSxRQUFRLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUN0QyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUxQixNQUFNLENBQ0osS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQzVFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE1BQU0sQ0FDSixLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FDNUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEIsTUFBTSxJQUFJLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDM0IsTUFBTSxPQUFPLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUUvRSxNQUFNLFNBQVMsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ25DLFFBQVEsQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRXJDLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FDNUYsSUFBSSxDQUNMLENBQUM7UUFDRixNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQzVGLElBQUksQ0FDTCxDQUFDO1FBQ0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFOUYsTUFBTSxTQUFTLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNuQyxRQUFRLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUVyQyxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQzVGLElBQUksQ0FDTCxDQUFDO1FBQ0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUM1RixJQUFJLENBQ0wsQ0FBQztRQUNGLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNGLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hHLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiMl9lcHNpbG9uLCBiMkFicywgYjJNYXNzRGF0YSwgYjJQb2x5Z29uU2hhcGUsIGIyVmVjMiB9IGZyb20gJy4uLy4uJztcclxuXHJcbmRlc2NyaWJlKCdjb2xsaXNpb24gdGVzdCcsICgpID0+IHtcclxuICBpdCgncG9seWdvbiBtYXNzIGRhdGEnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBjZW50ZXIgPSBuZXcgYjJWZWMyKDEwMC4wLCAtNTAuMCk7XHJcbiAgICBjb25zdCBoeCA9IDAuNTtcclxuICAgIGNvbnN0IGh5ID0gMS41O1xyXG4gICAgY29uc3QgYW5nbGUxID0gMC4yNTtcclxuXHJcbiAgICAvLyBEYXRhIGZyb20gaXNzdWUgIzQyMi4gTm90IHVzZWQgYmVjYXVzZSB0aGUgZGF0YSBleGNlZWRzIGFjY3VyYWN5IGxpbWl0cy5cclxuICAgIC8vY29uc3QgYjJWZWMyIGNlbnRlcigtMTUwMDAuMGYsIC0xNTAwMC4wZik7XHJcbiAgICAvL2NvbnN0IGZsb2F0IGh4ID0gMC43MmYsIGh5ID0gMC43MmY7XHJcbiAgICAvL2NvbnN0IGZsb2F0IGFuZ2xlMSA9IDAuMGY7XHJcblxyXG4gICAgY29uc3QgcG9seWdvbjEgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcclxuICAgIHBvbHlnb24xLlNldEFzQm94KGh4LCBoeSwgY2VudGVyLCBhbmdsZTEpO1xyXG5cclxuICAgIGNvbnN0IGFic1RvbCA9IDIuMCAqIGIyX2Vwc2lsb247XHJcbiAgICBjb25zdCByZWxUb2wgPSAyLjAgKiBiMl9lcHNpbG9uO1xyXG5cclxuICAgIGV4cGVjdChcclxuICAgICAgYjJBYnMocG9seWdvbjEubV9jZW50cm9pZC54IC0gY2VudGVyLngpIDwgYWJzVG9sICsgcmVsVG9sICogYjJBYnMoY2VudGVyLngpLFxyXG4gICAgKS50b1N0cmljdEVxdWFsKHRydWUpO1xyXG4gICAgZXhwZWN0KFxyXG4gICAgICBiMkFicyhwb2x5Z29uMS5tX2NlbnRyb2lkLnkgLSBjZW50ZXIueSkgPCBhYnNUb2wgKyByZWxUb2wgKiBiMkFicyhjZW50ZXIueSksXHJcbiAgICApLnRvU3RyaWN0RXF1YWwodHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgdmVydGljZXM6IGIyVmVjMltdID0gW1xyXG4gICAgICBuZXcgYjJWZWMyKGNlbnRlci54IC0gaHgsIGNlbnRlci55IC0gaHkpLFxyXG4gICAgICBuZXcgYjJWZWMyKGNlbnRlci54ICsgaHgsIGNlbnRlci55IC0gaHkpLFxyXG4gICAgICBuZXcgYjJWZWMyKGNlbnRlci54IC0gaHgsIGNlbnRlci55ICsgaHkpLFxyXG4gICAgICBuZXcgYjJWZWMyKGNlbnRlci54ICsgaHgsIGNlbnRlci55ICsgaHkpLFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBwb2x5Z29uMiA9IG5ldyBiMlBvbHlnb25TaGFwZSgpO1xyXG4gICAgcG9seWdvbjIuU2V0KHZlcnRpY2VzLCA0KTtcclxuXHJcbiAgICBleHBlY3QoXHJcbiAgICAgIGIyQWJzKHBvbHlnb24yLm1fY2VudHJvaWQueCAtIGNlbnRlci54KSA8IGFic1RvbCArIHJlbFRvbCAqIGIyQWJzKGNlbnRlci54KSxcclxuICAgICkudG9TdHJpY3RFcXVhbCh0cnVlKTtcclxuICAgIGV4cGVjdChcclxuICAgICAgYjJBYnMocG9seWdvbjIubV9jZW50cm9pZC55IC0gY2VudGVyLnkpIDwgYWJzVG9sICsgcmVsVG9sICogYjJBYnMoY2VudGVyLnkpLFxyXG4gICAgKS50b1N0cmljdEVxdWFsKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IG1hc3MgPSA0LjAgKiBoeCAqIGh5O1xyXG4gICAgY29uc3QgaW5lcnRpYSA9IChtYXNzIC8gMy4wKSAqIChoeCAqIGh4ICsgaHkgKiBoeSkgKyBtYXNzICogY2VudGVyLkRvdChjZW50ZXIpO1xyXG5cclxuICAgIGNvbnN0IG1hc3NEYXRhMSA9IG5ldyBiMk1hc3NEYXRhKCk7XHJcbiAgICBwb2x5Z29uMS5Db21wdXRlTWFzcyhtYXNzRGF0YTEsIDEuMCk7XHJcblxyXG4gICAgZXhwZWN0KGIyQWJzKG1hc3NEYXRhMS5jZW50ZXIueCAtIGNlbnRlci54KSA8IGFic1RvbCArIHJlbFRvbCAqIGIyQWJzKGNlbnRlci54KSkudG9TdHJpY3RFcXVhbChcclxuICAgICAgdHJ1ZSxcclxuICAgICk7XHJcbiAgICBleHBlY3QoYjJBYnMobWFzc0RhdGExLmNlbnRlci55IC0gY2VudGVyLnkpIDwgYWJzVG9sICsgcmVsVG9sICogYjJBYnMoY2VudGVyLnkpKS50b1N0cmljdEVxdWFsKFxyXG4gICAgICB0cnVlLFxyXG4gICAgKTtcclxuICAgIGV4cGVjdChiMkFicyhtYXNzRGF0YTEubWFzcyAtIG1hc3MpIDwgMjAuMCAqIChhYnNUb2wgKyByZWxUb2wgKiBtYXNzKSkudG9TdHJpY3RFcXVhbCh0cnVlKTtcclxuICAgIGV4cGVjdChiMkFicyhtYXNzRGF0YTEuSSAtIGluZXJ0aWEpIDwgNDAuMCAqIChhYnNUb2wgKyByZWxUb2wgKiBpbmVydGlhKSkudG9TdHJpY3RFcXVhbCh0cnVlKTtcclxuXHJcbiAgICBjb25zdCBtYXNzRGF0YTIgPSBuZXcgYjJNYXNzRGF0YSgpO1xyXG4gICAgcG9seWdvbjIuQ29tcHV0ZU1hc3MobWFzc0RhdGEyLCAxLjApO1xyXG5cclxuICAgIGV4cGVjdChiMkFicyhtYXNzRGF0YTIuY2VudGVyLnggLSBjZW50ZXIueCkgPCBhYnNUb2wgKyByZWxUb2wgKiBiMkFicyhjZW50ZXIueCkpLnRvU3RyaWN0RXF1YWwoXHJcbiAgICAgIHRydWUsXHJcbiAgICApO1xyXG4gICAgZXhwZWN0KGIyQWJzKG1hc3NEYXRhMi5jZW50ZXIueSAtIGNlbnRlci55KSA8IGFic1RvbCArIHJlbFRvbCAqIGIyQWJzKGNlbnRlci55KSkudG9TdHJpY3RFcXVhbChcclxuICAgICAgdHJ1ZSxcclxuICAgICk7XHJcbiAgICBleHBlY3QoYjJBYnMobWFzc0RhdGEyLm1hc3MgLSBtYXNzKSA8IDIwLjAgKiAoYWJzVG9sICsgcmVsVG9sICogbWFzcykpLnRvU3RyaWN0RXF1YWwodHJ1ZSk7XHJcbiAgICBleHBlY3QoYjJBYnMobWFzc0RhdGEyLkkgLSBpbmVydGlhKSA8IDQwLjAgKiAoYWJzVG9sICsgcmVsVG9sICogaW5lcnRpYSkpLnRvU3RyaWN0RXF1YWwodHJ1ZSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=